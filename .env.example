# Telegram Bot Configuration
# Get these from https://my.telegram.org/apps
API_ID=your_telegram_api_id
API_HASH=your_telegram_api_hash
BOT_TOKEN=your_bot_token_from_botfather

# Access Control
# Comma-separated list of allowed Telegram user IDs
ALLOWED_USER_IDS=123456789

# Mobile API Client Restrictions (optional)
# Comma-separated list of allowed client application IDs
# Leave empty to allow all clients (backward compatible)
# Example: ALLOWED_CLIENT_IDS=android-app-v1.0,ios-app-v2.0
ALLOWED_CLIENT_IDS=

# JWT Secret Key for Mobile API
# Generate with: openssl rand -hex 32
# IMPORTANT: Set to a secure random value in production!
JWT_SECRET_KEY=your-secret-key-change-in-production

# Firecrawl Configuration
# Get API key from https://www.firecrawl.dev/
FIRECRAWL_API_KEY=your_firecrawl_api_key
# Request timeout in seconds (default 90, increased for better reliability with slow pages)
# FIRECRAWL_TIMEOUT_SEC=90
# Wait for JS content to load in milliseconds (default 3000, helps with dynamic pages)
# FIRECRAWL_WAIT_FOR_MS=3000

# OpenRouter Configuration
# Get API key from https://openrouter.ai/
OPENROUTER_API_KEY=your_openrouter_api_key

# Primary model for summarization (DeepSeek V3.2 - most reliable for structured outputs)
# Alternative: qwen/qwen3-max (flagship, powerful but higher structured_output_parse_error rate)
OPENROUTER_MODEL=deepseek/deepseek-v3.2

# Fallback models (comma-separated, tried in order if primary fails)
# 1. Kimi K2.5 - Reasoning with structured thinking traces, 256k context
# 2. Qwen3 Max - Powerful flagship model
# 3. DeepSeek R1 - Advanced reasoning (paid tier)
OPENROUTER_FALLBACK_MODELS=moonshotai/kimi-k2.5,qwen/qwen3-max,deepseek/deepseek-r1

# Long context model for large documents (Kimi K2.5 - paid tier, 256k context + reasoning)
# Alternative: moonshotai/kimi-k2 (standard version without thinking traces)
OPENROUTER_LONG_CONTEXT_MODEL=moonshotai/kimi-k2.5

# Flash models for fast fallbacks (Modern February 2026 models)
# OPENROUTER_FLASH_MODEL - Primary fast model
OPENROUTER_FLASH_MODEL=google/gemini-3-flash
# OPENROUTER_FLASH_FALLBACK_MODELS - comma-separated list of fast fallbacks
OPENROUTER_FLASH_FALLBACK_MODELS=anthropic/claude-4.5-haiku

OPENROUTER_HTTP_REFERER=https://github.com/po4yka/bite-size-reader
OPENROUTER_X_TITLE=Bite-Size Reader

# YouTube Video Download Configuration
# Enable/disable YouTube video download feature
YOUTUBE_DOWNLOAD_ENABLED=true
# Directory to store downloaded videos
YOUTUBE_STORAGE_PATH=/data/videos
# Maximum size per video (MB)
YOUTUBE_MAX_VIDEO_SIZE_MB=500
# Maximum total storage for all videos (GB)
YOUTUBE_MAX_STORAGE_GB=100
# Preferred video quality (1080p, 720p, 480p, etc.)
YOUTUBE_PREFERRED_QUALITY=1080p
# Preferred subtitle/transcript languages (comma-separated)
YOUTUBE_SUBTITLE_LANGUAGES=en,ru
# Enable automatic cleanup of old videos
YOUTUBE_AUTO_CLEANUP_ENABLED=true
# Delete videos older than N days
YOUTUBE_CLEANUP_AFTER_DAYS=30

# Database Configuration
DB_PATH=/data/app.db

# Database Operation Limits
# Timeout for database operations in seconds (prevents indefinite hangs)
DB_OPERATION_TIMEOUT=30.0
# Maximum retries for transient database errors (locked/busy)
DB_MAX_RETRIES=3
# JSON validation limits (security against deeply nested/large payloads)
DB_JSON_MAX_SIZE=10000000
DB_JSON_MAX_DEPTH=20
DB_JSON_MAX_ARRAY_LENGTH=10000
DB_JSON_MAX_DICT_KEYS=1000

# Logging Configuration
LOG_LEVEL=INFO
# Enable verbose payload logging (0/1)
DEBUG_PAYLOADS=0

# Request Timeout (seconds)
REQUEST_TIMEOUT_SEC=60

# Language Preference
# PREFERRED_LANG can be 'auto', 'en', or 'ru'
PREFERRED_LANG=auto

# Concurrency
# Limit simultaneous external calls (Firecrawl/OpenRouter)
MAX_CONCURRENT_CALLS=4

# Telegram Message Limits
# Maximum characters per Telegram message (Telegram limit ~4096, keep safety margin)
TELEGRAM_MAX_MESSAGE_CHARS=3500
# Maximum URL length (RFC 2616 limit)
TELEGRAM_MAX_URL_LENGTH=2048
# Maximum number of URLs in a batch operation
TELEGRAM_MAX_BATCH_URLS=200
# Minimum interval between messages in milliseconds (rate limiting)
TELEGRAM_MIN_MESSAGE_INTERVAL_MS=100

# Content Processing Limits
# Maximum text length in kilobytes (for URL extraction, regex DoS prevention)
MAX_TEXT_LENGTH_KB=50

# Optional: E2E Testing
# E2E=1

# MCP Server for OpenClaw / AI Agent Integration (Optional)
MCP_ENABLED=false                               # Enable MCP server
MCP_TRANSPORT=stdio                             # Transport: 'stdio' or 'sse'
MCP_HOST=0.0.0.0                                # Bind address for SSE transport
MCP_PORT=8200                                   # Port for SSE transport

# Karakeep Integration (Optional)
KARAKEEP_ENABLED=false                          # Enable/disable Karakeep sync
KARAKEEP_API_URL=http://localhost:3000/api/v1   # Karakeep API endpoint
KARAKEEP_API_KEY=                               # Karakeep API key (generate in settings)
KARAKEEP_SYNC_TAG=bsr-synced                    # Tag to mark synced items
KARAKEEP_SYNC_INTERVAL_HOURS=6                  # Sync interval for cron job
