---
description: Docker Best Practices for Containerized Deployment
globs:
  - "Dockerfile"
alwaysApply: true
---

# Docker Container Guidelines

- Base on an official slim Python image matching the runtime (Python 3.13); install build tools only when needed and clean them up.
- Use uv for dependency installation; cache wheels between stages and prefer multi-stage builds to keep runtime slim.
- Include required system deps (e.g., ffmpeg/yt-dlp deps) for YouTube handling; avoid bundling unused tools.
- Pass secrets via environment variables; do not bake them into the image or layers.
- Persist SQLite DB and downloaded artifacts under `/data` via a volume/bind mount; limit exposed ports to what FastAPI/Telegram need.
- Keep Dockerfile readable with clear build/run instructions; avoid unnecessary layers and remove caches.
